<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="initial-scale=1.0,minimal-ui">
<title>PM2 使用方法之从抓狂到情绪稳定 |
    PCDotFan</title>
<link rel="stylesheet" href="/styles/main.css">
<link rel="shortcut icon" href="https://blog.g4.cx/favicon.ico?v=1580039085583">
<link href="https://fonts.googleapis.com/css?family=Lato:400,700&display=swap" rel="stylesheet">
<script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>
  </head>
  <body>
    <div class="surface-content">
  <header class="site-header">
      <div class="container">
          <div class="topNav">
              <ul class="subnav-ul">
                
                  
                    <li><a href="/" aria-current="page">首页</a></li>
                  
                
                  
                    <li><a href="https://blog.g4.cx/tags/music" aria-current="page">音乐</a></li>
                  
                
                  
                    <li><a href="/post/about" aria-current="page">关于</a></li>
                  
                
              </ul>
              <div class="social-container">
                
                  
                
                  
                
                  
                
                  
                
                  
                
              </div>
          </div>
          <h1 class="site-title">
              <a href="https://blog.g4.cx">PCDotFan</a>
          </h1>
          <p class="site-description">A straight jacket for your mind.</p>
      </div>
  </header>
    <main class="main-content">
      <section class="block-content container">
        
        <h2 class="block-title">
          PM2 使用方法之从抓狂到情绪稳定
        </h2>
        <div class="block-postMetaWrap">
          <time>2019-06-09</time>
          
        </div>
        <div class="grap">
          <p>PM2 可以说是 Node.js 上为数不多称得上「好用」的进程管理软件了。之前疯狂 diss 它无非是因为文档写得太繁杂，<a href="http://pm2.keymetrics.io/docs/usage/quick-start/">Quick Start</a> 介绍的内容又简单得过分。这次我还是以一个「普通用户」的角度来写写——我是怎么从情绪逐渐变态过渡到逐渐稳定的。</p>
<!-- more -->
<p><s>疯狂 diss ucloud，根本没感受到香港主机应该有的速度</s></p>
<h2 id="懒人版npm-一招流">懒人版：npm 一招流</h2>
<p>多数使用到 PM2 的场景大概是在线上环境部署个 koa, egg.js 什么的，然而看了无比强大的 <code>pm2 start</code> 命令使用文档后大概只会和我一样懵逼……</p>
<p>「请告诉我怎么运行 <code>npm run dev</code> 就好了。」</p>
<p>对于 <code>package.json</code> 已经定义好的 <code>scripts</code> 中的指令，假定你需要执行的是 <code>npm run dev</code>：</p>
<pre><code class="language-bash">cd koa2 # 假定文件均放在 ko2 目录下
pm2 start npm --name {name} -- run {script}
</code></pre>
<p>也就是 <code>pm2 start npm --name koa-development -- run dev</code>，一个 Koa 就启动好了。</p>
<h2 id="一条命令实现开机启动">一条命令实现开机启动</h2>
<p>好了，无论是生产环境还是开发环境，上面的一条命令应该足够你启动绝大多数项目了。为了重启后还能够自动启动所有的进程，第二条命令是：</p>
<pre><code class="language-bash">pm2 startup [ubuntu | ubuntu14 | ubuntu12 | centos | centos6 | arch | oracle | amazon | macos | darwin | freebsd | systemd | systemv | upstart | launchd | rcd | openrc]
</code></pre>
<p>执行后将会保存当前所有进程，再也不用重启后还要费力执行好几遍命令了。</p>
<p><code>pm2 startup centos</code>，重启一下喝杯茶，这下我看你还怎么 502……</p>

        </div>
        <div class="tag-list">
          
        </div>
          <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '6a2718ba6556a741c645',
    clientSecret: 'c33a68c8747fe1f16167cfa8167e74292b596f6f',
    repo: 'pcdotfan.github.io',
    owner: 'pcdotfan',
    admin: ['pcdotfan'],
    id: location.pathname,      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>
   
      </section>
    </main>
        <footer class="site-footer">
        <p class="container">
            Made with
<span class="cute">♥</span>
<span class="sep"></span>
Designed by
<a href="https://fatesinger.com" target="_blank">bigfa</a>
<span class="sep"></span>
Proudly published by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
        </p>
    </footer>
</div>
<script>
    hljs.initHighlightingOnLoad()
</script>
      
  </body>
</html>
